<!DOCTYPE html>
<head>
  <title>Infomation-monitor</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@300&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/howler@2.2.3/dist/howler.js" defer></script>
  <style>
  <style>
    #map {
      height: 600px;
    }
    *{
      font-family: 'M PLUS 1p', sans-serif;
    }
    .slideshow-container {
      max-width: 400px;
      position: relative;
      margin: auto;
      overflow: hidden;
    }
    .marquee {
      display: flex;
      white-space: nowrap;
      overflow: hidden;
      gap: 1rem;
      font-size: 3rem;
    }
    .slideshow-container {
      max-width: 400px;
      position: relative;
      margin: auto;
      overflow: hidden;
    }

    .slide {
      display: none;
      width: 100%;
      height: 100%;
      transition: opacity 1s ease-in-out;
    }

    .slide.active {
      display: block;
      opacity: 1;
    }
  </style>
</head>
<Body>
<audio src="https://saigaikinkyuu.github.io/monitor-info/audio/warning.mp3" id="audioPlayer"></audio>
  <div style="display: block;" id="container">
    <h3 id="quake_fixed" style="background-color: #00000066; position: absolute; margin-left: 46%; margin-top: 0%; color: white; display: none;">(固定)地震情報</h3>
    <h3 id="amds_fixed" style="background-color: #00000066; position: absolute; margin-left: 46%; margin-top: 0%; color: white; display: none;">(固定)AMDS情報</h3>
  <div style="position: absolute; margin-left: 86%;">
    <h3 id="now_time" style="font-size: 30px;">《現在時刻》</h3>
  </div>
  <div id="slideshow-container" style="height: 650px;">
    <div class="slide active" id="content1">
      <span class="material-symbols-outlined" style="font-size: 10rem;">
        Info
      </span>
      <h3 style="font-size: 3rem;">「SOS」の際は、「1」キーを押してください。</h3>
      <h3 style="font-size: 3rem;">地震情報の優先表示を行う際は、「E」キーを押してください。</h3>
    </div>
    <div class="slide" id="content2">
      <span class="material-symbols-outlined" style="font-size: 9rem;">
        Earthquake
      </span>
      <h3 style="font-size: 1.7rem;">最新の地震情報(毎時00分・30分更新)</h3>
      <h3 id="title_e" style="font-size: 1.3rem; text-align: center;"></h3>
      <h3 id="c1_e" style="font-size: 1.3rem;"></h3>
      <h3 id="c2_e" style="font-size: 1.3rem;"></h3>
      <h3 id="time_e" style="font-size: 1.3rem;"></h3>
      <h3 id="hypocenter_e" style="font-size: 1.3rem;"></h3>
      <h3 id="maxint_e" style="font-size: 1.3rem;"></h3>
      <h3 id="mag_e" style="font-size: 1.3rem;"></h3>
      <h3 id="area_e" style="font-size: 1.3rem;"></h3>
    </div>
    <div class="slide" id="content3">
      <span class="material-symbols-outlined" style="font-size: 9rem;">
        thermostat
      </span>
      <h3 style="font-size: 1.5rem;">アメダス情報</h3>
      <h3 style="font-size: 1.7rem;">観測地点：東京(東京管区気象台管理)</h3>
      <table style="font-size: 1.7rem; width: 100%; text-align: center; font-weight: bold;">
        <tr>
          <td id="pressure"></td>
          <td id="n_pressure"></td>
        </tr>
        <tr>
          <td id="temp"></td>
          <td id="humidity"></td>
        </tr>
        <tr>
          <td id="snow1h"></td>
          <td id="snow6h"></td>
        </tr>
        <tr>
          <td id="snow12h"></td>
          <td id="snow24h"></td>
        </tr>
        <tr>
          <td id="sun10m"></td>
          <td id="sun1h"></td>
        </tr>
        <tr>
          <td id="precipi10m"></td>
          <td id="precipi1h"></td>
        </tr>
        <tr>
          <td id="precipi3h"></td>
          <td id="precipi24h"></td>
        </tr>
        <tr>
          <td id="windDirection"></td>
          <td id="wind"></td>
        </tr>
      </table>
    </div>
  </div>
  <div class="marquee" style="background-color: #6497f4; color: white;">
    <div class="marquee-inner" id="weatherCo1">地震が発生したら、音声と文字にてお知らせいたします。「ここに、天気・過去の地震情報等を表記いたします【テスト】　札幌　☀　　青森　☁　　仙台　☁　　新潟　☀　　金沢　☁　　東京　☂　　　　《省略》　　　那覇　☂」</div>
    <div class="marquee-inner" aria-hidden="true" id="weatherCo2">地震が発生したら、音声と文字にてお知らせいたします。「ここに、天気・過去の地震情報等を表記いたします【テスト】　札幌　☀　　青森　☁　　仙台　☁　　新潟　☀　　金沢　☁　　東京　☂　　　　《省略》　　　那覇　☂」</div>
  </div>
  </div>
  <div id="upDate" style="background-color: #6497f4; height: 700px; display: none; width: 100%; margin-top: 0px; padding-top: 0px;">
    <h2 style="text-align: center; color: white; font-size: 3.0rem; margin: 0px; padding-top: 230px;">更新中</h2>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;">毎時00分と30分は、データ更新の時間です。</h3>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;">「U」キーを押すことで、更新することもできます。</h3>
    
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js" integrity="sha512-c5vqOu9vQkOsVEb4bF/jU6RGU/rdNa7fuNeObaRqy+PB5e48tXtFug6ZYw3LWoJ/DoBf7BMj/+kO9+IiVbId4A==" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.js"></script>
  </div>
  <div id="newQuake" style="background-color: #ffcd25; height: 700px; display: none; width: 100%; margin-top: 0px; padding-top: 0px;">
    <h2 style="color: white; font-size: 3.0rem; margin: 0px;" id="titleE">地震情報</h2>
    <h3 style="text-align: center; color: white; font-size: 1.7rem; padding-top: 130px;" id="timeE">発生時刻：</h3>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;" id="hypocenterE">震源地：</h3>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;" id="maxE">最大震度：</h3>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;" id="magE">マグニチュード：</h3>
    <h3 style="text-align: center; color: white; font-size: 1.7rem;" id="comentE">津波：</h3>
  </div>
  <script>
    function update() {
      var element = document.getElementById("now_time");
      element.textContent = new Date().toLocaleTimeString();; // 現在時刻を表示

      // 次の更新処理を予約
      setTimeout(update, 1000); // 1秒後に再度実行
    }

    // 初回の更新処理を開始
    update();
  </script>
  <script>
    function AmeDasu() {
    // URLからJSONデータを取得する例// 現在の日時を取得
    const currentDate = new Date();

    // 年月日時分秒を取得
    const year = currentDate.getFullYear();
    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
    const day = String(currentDate.getDate()).padStart(2, '0');
    const hours = String(currentDate.getHours()).padStart(2, '0');
    const minutes = String(currentDate.getMinutes()).padStart(2, '0');
      if(minutes > 10){
        const formattedDate = `${year}${month}${day}${hours}`;
        // 指定された形式の数値を作成
        var json_url = 'https://www.jma.go.jp/bosai/amedas/data/map/' + formattedDate + '0000.json'
      }else{
        const hours_c = hours-1
        const formattedDate = `${year}${month}${day}${hours_c}`;
        // 指定された形式の数値を作成
        var json_url = 'https://www.jma.go.jp/bosai/amedas/data/map/' + formattedDate + '0000.json'
      }

    const url = json_url;
    fetch(url)
      .then(response => response.json())
      .then(data => {
        // "10"の中の値を取得
        const pressure  = data["44132"].pressure[0];
        const n_pressure  = data["44132"].normalPressure[0];
        const temp  = data["44132"].temp[0];
        const humidity  = data["44132"].humidity[0];
        const snow1h  = data["44132"].snow1h[0];
        const snow6h  = data["44132"].snow6h[0];
        const snow12h  = data["44132"].snow12h[0];
        const snow24h  = data["44132"].snow24h[0];
        const sun10m  = data["44132"].sun10m[0];
        const sun1h  = data["44132"].sun1h[0];
        const precipi10m  = data["44132"].precipitation10m[0];
        const precipi1h  = data["44132"].precipitation1h[0];
        const precipi3h  = data["44132"].precipitation3h[0];
        const precipi24h  = data["44132"].precipitation24h[0];
        const windDirection  = data["44132"].windDirection[0];
        const wind  = data["44132"].wind[0];
        var windDirection_c = "";
        if(windDirection === 0){
          windDirection_c = "静穏"
        }else if(windDirection === 1){
          windDirection_c = "北北東"
        }else if(windDirection === 2){
          windDirection_c = "北東"
        }else if(windDirection === 3){
          windDirection_c = "東北東"
        }else if(windDirection === 4){
          windDirection_c = "東"
        }else if(windDirection === 5){
          windDirection_c = "東南東"
        }else if(windDirection === 6){
          windDirection_c = "南東"
        }else if(windDirection === 7){
          windDirection_c = "南南東"
        }else if(windDirection === 8){
          windDirection_c = "南"
        }else if(windDirection === 9){
          windDirection_c = "南南西"
        }else if(windDirection === 10){
          windDirection_c = "南西"
        }else if(windDirection === 11){
          windDirection_c = "西南西"
        }else if(windDirection === 12){
          windDirection_c = "西"
        }else if(windDirection === 13){
          windDirection_c = "西北西"
        }else if(windDirection === 14){
          windDirection_c = "北西"
        }else if(windDirection === 15){
          windDirection_c = "北北西"
        }else if(windDirection === 16){
          windDirection_c = "北"
        }
        document.getElementById('pressure').textContent = "気圧(海上)：" + pressure + "hPa";
        document.getElementById('n_pressure').textContent = "気圧(現地)：" + n_pressure + "hPa";
        document.getElementById('temp').textContent = "気温：" + temp + "℃";
        document.getElementById('humidity').textContent = "湿度：" + humidity + "%";
        document.getElementById('snow1h').textContent = "降雪量(1時間)：" + snow1h + "cm";
        document.getElementById('snow6h').textContent = "降雪量(6時間)：" + snow6h + "cm";
        document.getElementById('snow12h').textContent = "降雪量(12時間)：" + snow12h + "cm";
        document.getElementById('snow24h').textContent = "降雪量(24時間)：" + snow24h + "cm";
        document.getElementById('sun10m').textContent = "日照時間(10分)：" + sun10m + "min";
        document.getElementById('sun1h').textContent = "日照時間(1時間)：" + sun1h + "hour";
        document.getElementById('precipi10m').textContent = "降水量(10分間)：" + precipi10m + "mm";
        document.getElementById('precipi1h').textContent = "降水量(1時間)：" + precipi1h + "mm";
        document.getElementById('precipi3h').textContent = "降水量(3時間)：" + precipi3h + "mm";
        document.getElementById('precipi24h').textContent = "降水量(24時間)：" + precipi24h + "mm";
        document.getElementById('windDirection').textContent = "風向：" + windDirection_c;
        document.getElementById('wind').textContent = "風速：" + wind + "m/s";
      })
      .catch(error => console.error("Error fetching data:", error));
    }
    AmeDasu();
  </script>
  <script>
    function quake() {
    const url = "https://www.jma.go.jp/bosai/quake/data/list.json";
    fetch(url)
      .then(response => response.json())
      .then(data => {
        const json_url  = data[0].json;
        const json_url_c = "https://www.jma.go.jp/bosai/quake/data/" + json_url;
           fetch(json_url_c)
          .then(response => response.json())
          .then(data => {
            const title  = data.Control.Title;
            const coment1  = data.Head.Headline.Text;
            const time = data.Body.Earthquake.OriginTime;
            const hypocenter = data.Body.Earthquake.Hypocenter.Area.Name;
            const mag = data.Body.Earthquake.Magnitude;
            const coment2 = data.Body.Comments.ForecastComment.Text;
            const maxint = data.Body.Intensity.Observation.MaxInt;
            for (const prefObject of data.Body.Intensity.Observation.Pref) {
              var einfo;
              const einfo_area = prefObject.Name;
              const einfo_area_int = prefObject.MaxInt;
              if(einfo){
              einfo = einfo + "【" + einfo_area + "】 震度" + einfo_area_int + "　";
              }else {
              einfo = "【" + einfo_area + "】 震度" + einfo_area_int + "　";
              }
            }
            const dateObject = new Date(time);

            const year = dateObject.getFullYear().toString().slice(-2); // 下2桁を取得
            const month = (dateObject.getMonth() + 1).toString().padStart(2, '0');
            const day = dateObject.getDate().toString().padStart(2, '0');
            const hours = dateObject.getHours().toString().padStart(2, '0');
            const minutes = dateObject.getMinutes().toString().padStart(2, '0');

            time_e = `${year}年${month}月${day}日 ${hours}時${minutes}分`;
            document.getElementById("title_e").textContent = title;
            document.getElementById("c1_e").textContent = coment1;
            document.getElementById("c2_e").textContent = coment2;
            document.getElementById("time_e").textContent = "発生時刻：" + time_e;
            document.getElementById("hypocenter_e").textContent = "震源地：" + hypocenter;
            document.getElementById("mag_e").textContent = "マグニチュード：" + mag;
            document.getElementById("maxint_e").textContent = "最大震度：" + maxint;
            document.getElementById("area_e").textContent = "震度観測値：" + einfo;
            setTimeout(quake, 60000); // 1秒後に再度実行
          })
          .catch(error => console.error("Error fetching data:", error));
      })
      .catch(error => console.error("Error fetching data:", error));
    }
    quake();
  </script>
  <script>
  function audio() {
  // 音楽ファイルのURLを指定
  var audioFile = '../audio/final_audio.mp3';
  
  const currentDate = new Date();
  const hours = String(currentDate.getHours()).padStart(2, '0');
  const minutes = String(currentDate.getMinutes()).padStart(2, '0');
    if(minutes === "45" && hours === "21"){
      // Audioオブジェクトを作成
      var audio = new Audio(audioFile);
      // 音楽再生
      audio.play();
    }
    setTimeout(audio, 60000); // 1秒後に再度実行
  }
    audio();
  </script>
  <script>
    function dataUp(){
      $('#container').fadeOut(100, function() {
      });
      $('#upDate').fadeIn(5000, function() {
      });
      AmeDasu()
      quake()
      var newTime_M = new Date().getMinutes();
      var newTime_S = new Date().getSeconds();
      if(newTime_M < 30){
        var time_M_S = 1800000 - (newTime_M*60000 + newTime_S*1000)
      }else{
        var time_M_S = 3600000 - (newTime_M*60000 + newTime_S*1000)
      }
      console.log(time_M_S)
      setTimeout(dataUp, time_M_S); // 1秒後に再度実行
      setTimeout(function(){
        if(quake_info_condition === false){
      $('#container').fadeIn(5000, function() {
      });
      $('#upDate').fadeOut(100, function() {
      });
        }
      }, 15000);
    }
    dataUp();
  </script>
  <script>
    document.addEventListener('keydown', (e) => {
    let element_E = document.getElementById('quake_fixed');
    let style_E = window.getComputedStyle(element_E);
    let value_E = style_E.getPropertyValue('display');
    let element_A = document.getElementById('amds_fixed');
    let style_A = window.getComputedStyle(element_A);
    let value_A = style_A.getPropertyValue('display');
      const key = e.keyCode;
      if (key === 85) {
        dataUp();
      }else if (key === 69 && value_A === "none"){
        keyActionE();
      }else if (key === 65 && value_E === "none"){
        keyActionA();
      }
    });
  </script>
  <script>
    var weather_co = "";
    var weather_co1 = "";
    var weather_co2 = "";
    weather_co1 += "今日の天気　"
    weather_co2 += "明日の天気　"
    var areaArray = ["011000","012000","013000","014100","016000","017000","020000","030000","040000","050000","060000","070000","080000","090000","100000","110000","120000","130000","140000","200000","210000","220000","230000","240000","150000","160000","170000","180000","250000","260000","270000","280000","290000","300000","310000","320000","330000","340000","360000","370000","380000","390000","350000","400000","410000","420000","430000","440000","450000","460100","471000","472000","473000","474000"]
      for (var n = 0;n<areaArray.length;n++){
    // JSONデータを取得するURL
var apiUrl = 'https://www.jma.go.jp/bosai/forecast/data/forecast/' + areaArray[n] + '.json';

// fetchを使用してJSONデータを取得
fetch(apiUrl)
  .then(response => {
    // レスポンスが成功したかどうかを確認
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    // JSONデータを返す
    return response.json();
  })
  .then(data => {
    // 取得したJSONデータを使って何かしらの処理を行う
    var preArea = data[0].publishingOffice;
    var area = data[0].timeSeries[0].areas[0].area.name;
    for (var i = 0;i<2;i++){
      if(i === 0){
    var weather = data[0].timeSeries[0].areas[0].weatherCodes[0];
      }else if(i === 1){
    var weather = data[0].timeSeries[0].areas[0].weatherCodes[1];
      }
    var weather_icon = ""
    if(weather === "100"){
      var weather_icon = "☀"
    }else if(weather === "101"){
      var weather_icon = "☀/☁"
    }else if(weather === "102"){
      var weather_icon = "☀/☂"
    }else if(weather === "103"){
      var weather_icon = "☀/☂"
    }else if(weather === "104"){
      var weather_icon = "☀/☃"
    }else if(weather === "105"){
      var weather_icon = "☀/☃"
    }else if(weather === "106"){
      var weather_icon = "☀/❆☂"
    }else if(weather === "107"){
      var weather_icon = "☀/❆☂"
    }else if(weather === "108"){
      var weather_icon = "☀/☂・☇☂"
    }else if(weather === "110"){
      var weather_icon = "☀/☁"
    }else if(weather === "111"){
      var weather_icon = "☀〉☁"
    }else if(weather === "112"){
      var weather_icon = "☀〉☂"
    }else if(weather === "113"){
      var weather_icon = "☀〉☂"
    }else if(weather === "114"){
      var weather_icon = "☀〉☂"
    }else if(weather === "115"){
      var weather_icon = "☀〉☃"
    }else if(weather === "116"){
      var weather_icon = "☀〉☃"
    }else if(weather === "117"){
      var weather_icon = "☀〉☃"
    }else if(weather === "118"){
      var weather_icon = "☀〉☂・☃"
    }else if(weather === "119"){
      var weather_icon = "☀〉☂・☇☂"
    }else if(weather === "120"){
      var weather_icon = "☀/☂"
    }else if(weather === "121"){
      var weather_icon = "☀/☂"
    }else if(weather === "122"){
      var weather_icon = "☀/☂"
    }else if(weather === "123"){
      var weather_icon = "☀/☇☂"
    }else if(weather === "124"){
      var weather_icon = "☀/☃"
    }else if(weather === "125"){
      var weather_icon = "☀〉☇☂"
    }else if(weather === "126"){
      var weather_icon = "☀〉☂"
    }else if(weather === "127"){
      var weather_icon = "☀〉☂"
    }else if(weather === "128"){
      var weather_icon = "☀〉☂"
    }else if(weather === "130"){
      var weather_icon = "☀(朝：霧)"
    }else if(weather === "131"){
      var weather_icon = "☀(早朝：霧)"
    }else if(weather === "132"){
      var weather_icon = "☀/☁"
    }else if(weather === "140"){
      var weather_icon = "☀/☇☂"
    }else if(weather === "160"){
      var weather_icon = "☀/☃・☂"
    }else if(weather === "170"){
      var weather_icon = "☀/☃・☂"
    }else if(weather === "181"){
      var weather_icon = "☀〉☃・☂"
    }else if(weather === "200"){
      var weather_icon = "☁"
    }else if(weather === "201"){
      var weather_icon = "☁/☀"
    }else if(weather === "202"){
      var weather_icon = "☁/☂"
    }else if(weather === "203"){
      var weather_icon = "☁/☂"
    }else if(weather === "204"){
      var weather_icon = "☁/☃"
    }else if(weather === "205"){
      var weather_icon = "☁/☃"
    }else if(weather === "206"){
      var weather_icon = "☁/❆☂"
    }else if(weather === "207"){
      var weather_icon = "☁/❆☂"
    }else if(weather === "208"){
      var weather_icon = "☁/☂・☇☂"
    }else if(weather === "209"){
      var weather_icon = "霧"
    }else if(weather === "210"){
      var weather_icon = "☁〉☀"
    }else if(weather === "211"){
      var weather_icon = "☁〉☀"
    }else if(weather === "212"){
      var weather_icon = "☁〉☂"
    }else if(weather === "213"){
      var weather_icon = "☁〉☂"
    }else if(weather === "214"){
      var weather_icon = "☁〉☂"
    }else if(weather === "215"){
      var weather_icon = "☁〉☃"
    }else if(weather === "216"){
      var weather_icon = "☁〉☃"
    }else if(weather === "217"){
      var weather_icon = "☁〉☃"
    }else if(weather === "218"){
      var weather_icon = "☁〉☂・☃"
    }else if(weather === "219"){
      var weather_icon = "☁〉☂・☇☂"
    }else if(weather === "220"){
      var weather_icon = "☁/☂"
    }else if(weather === "221"){
      var weather_icon = "☁/☂"
    }else if(weather === "222"){
      var weather_icon = "☁/☂"
    }else if(weather === "223"){
      var weather_icon = "☁/☀"
    }else if(weather === "224"){
      var weather_icon = "☁/☂"
    }else if(weather === "225"){
      var weather_icon = "☁〉☂"
    }else if(weather === "226"){
      var weather_icon = "☁〉☂"
    }else if(weather === "228"){
      var weather_icon = "☁〉☃"
    }else if(weather === "229"){
      var weather_icon = "☁〉☃"
    }else if(weather === "230"){
      var weather_icon = "☁〉☃"
    }else if(weather === "231"){
      var weather_icon = "☁/霧・☂"
    }else if(weather === "240"){
      var weather_icon = "☁/☇☂"
    }else if(weather === "260"){
      var weather_icon = "☁/☇☃"
    }else if(weather === "270"){
      var weather_icon = "☁/☃・☂"
    }else if(weather === "281"){
      var weather_icon = "☁〉☃・☂"
    }else if(weather === "300"){
      var weather_icon = "☂"
    }else if(weather === "301"){
      var weather_icon = "☂/☀"
    }else if(weather === "302"){
      var weather_icon = "☂/☁"
    }else if(weather === "303"){
      var weather_icon = "☂/☃"
    }else if(weather === "304"){
      var weather_icon = "☂・☃"
    }else if(weather === "306"){
      var weather_icon = "↓☂↓"
    }else if(weather === "308"){
      var weather_icon = "࿓☂"
    }else if(weather === "309"){
      var weather_icon = "☂/☃"
    }else if(weather === "311"){
      var weather_icon = "☂〉☀"
    }else if(weather === "313"){
      var weather_icon = "☂〉☁"
    }else if(weather === "314"){
      var weather_icon = "☂〉☃"
    }else if(weather === "315"){
      var weather_icon = "☂〉☃"
    }else if(weather === "316"){
      var weather_icon = "☂・☃〉☀"
    }else if(weather === "317"){
      var weather_icon = "☂・☃〉☁"
    }else if(weather === "320"){
      var weather_icon = "☂〉☀"
    }else if(weather === "321"){
      var weather_icon = "☂〉☁"
    }else if(weather === "322"){
      var weather_icon = "☂〉☃"
    }else if(weather === "323"){
      var weather_icon = "☂〉☀"
    }else if(weather === "324"){
      var weather_icon = "☂〉☀"
    }else if(weather === "325"){
      var weather_icon = "☂〉☀"
    }else if(weather === "326"){
      var weather_icon = "☂〉☃"
    }else if(weather === "327"){
      var weather_icon = "☂〉☃"
    }else if(weather === "328"){
      var weather_icon = "☂/↓☂↓"
    }else if(weather === "329"){
      var weather_icon = "☂/❆☂"
    }else if(weather === "340"){
      var weather_icon = "☃・☂"
    }else if(weather === "350"){
      var weather_icon = "☇☂"
    }else if(weather === "361"){
      var weather_icon = "☃・☂〉☀"
    }else if(weather === "371"){
      var weather_icon = "☃・☂〉☁"
    }else if(weather === "400"){
      var weather_icon = "☃"
    }else if(weather === "401"){
      var weather_icon = "☃/☀"
    }else if(weather === "402"){
      var weather_icon = "☃/☁"
    }else if(weather === "403"){
      var weather_icon = "☃/☂"
    }else if(weather === "405"){
      var weather_icon = "❆☃❆"
    }else if(weather === "406"){
      var weather_icon = "࿓☃"
    }else if(weather === "407"){
      var weather_icon = "࿓࿓☃"
    }else if(weather === "409"){
      var weather_icon = "☃/☂"
    }else if(weather === "405"){
      var weather_icon = "☃〉☂"
    }else if(weather === "411"){
      var weather_icon = "☃〉☀"
    }else if(weather === "413"){
      var weather_icon = "☃〉☁"
    }else if(weather === "414"){
      var weather_icon = "☃〉☂"
    }else if(weather === "420"){
      var weather_icon = "☃〉☀"
    }else if(weather === "421"){
      var weather_icon = "☃〉☁"
    }else if(weather === "422"){
      var weather_icon = "☃〉☂"
    }else if(weather === "423"){
      var weather_icon = "☃〉☂"
    }else if(weather === "425"){
      var weather_icon = "☃/❆☃❆"
    }else if(weather === "426"){
      var weather_icon = "☃〉❆☂"
    }else if(weather === "427"){
      var weather_icon = "☃/❆☂"
    }else if(weather === "450"){
      var weather_icon = "☇☃"
    }else{
      var weather_icon = "--"
    }
      if(i === 0){
        weather_co1 += preArea + area + "　" + weather_icon + "　　";
      }else if(i === 1){
        weather_co2 += preArea + area + "　" + weather_icon + "　　";
      }
      weather_co = weather_co1 + weather_co2;
    document.getElementById("weatherCo1").textContent = weather_co
    document.getElementById("weatherCo2").textContent = weather_co
    }
  })
  .catch(error => {
    // エラーが発生した場合の処理
    console.error('Error fetching JSON:', error.message);
  });
    }
  </script>
  <script>
      function announceQuake(announceText){
    // ブラウザにWeb Speech API Speech Synthesis機能があるか判定        
    if ('speechSynthesis' in window) {
    // 発言を設定 (必須)
    const uttr = new SpeechSynthesisUtterance(announceText);
    // 音声合成用のオブジェクトを生成
    const synthesis = window.speechSynthesis;
    // 利用可能な音声の一覧を取得
    const voices = synthesis.getVoices();

    // 例として、最初の音声を使用していますが、実際には好みの音声を選択できます
    const selectedVoice = voices[24];
    uttr.voice = selectedVoice;
    uttr.lang = "ja-JP";
    uttr.rate = 1.5;
    uttr.pitch = 1;
    uttr.volume = 1;

    // 発言を再生 (必須)
    window.speechSynthesis.speak(uttr);
    }
      }
    var quake_info_condition = false;
    function newquake() {
    const url = "https://www.jma.go.jp/bosai/quake/data/list.json";
    fetch(url)
      .then(response => response.json())
      .then(data => {
        const json_url  = data[0].json;
        const title  = data[0].ttl;
        const ctt  = new Date(data[0].rdt);
        const currentime = new Date()
        currentime.setMinutes(new Date().getMinutes()-10)
        if(ctt > currentime && quake_info_condition === false){
        if(quake_info_condition === false){
        const json_url_c = "https://www.jma.go.jp/bosai/quake/data/" + json_url;
           fetch(json_url_c)
          .then(response => response.json())
          .then(data => {
            const time = data.Body.Earthquake.OriginTime;
            const hypocenter = data.Body.Earthquake.Hypocenter.Area.Name;
            const mag = data.Body.Earthquake.Magnitude;
            const coment2 = data.Body.Comments.ForecastComment.Text;
            const maxint = data.Body.Intensity.Observation.MaxInt;
            const dateObject = new Date(time);

            const year = dateObject.getFullYear().toString().slice(-2); // 下2桁を取得
            const month = (dateObject.getMonth() + 1).toString().padStart(2, '0');
            const day = dateObject.getDate().toString().padStart(2, '0');
            const hours = dateObject.getHours().toString().padStart(2, '0');
            const minutes = dateObject.getMinutes().toString().padStart(2, '0');

            time_e = `${year}年${month}月${day}日 ${hours}時${minutes}分`;
            document.getElementById("titleE").textContent = title;
            document.getElementById("comentE").textContent = coment2;
            document.getElementById("timeE").textContent = "発生時刻：" + time_e;
            document.getElementById("hypocenterE").textContent = "震源地：" + hypocenter;
            document.getElementById("magE").textContent = "マグニチュード：" + mag;
            document.getElementById("maxE").textContent = "最大震度：" + maxint;
            quake_info_condition = true;
            const warning = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/warning.mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: firstCall
            });
            function firstCall(){
            if(maxint === "1"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int1].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "2"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int2].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "3"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int3].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "4"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int4].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "5-"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int5-].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "5+"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int5+].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "6-"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int6-].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "6+"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int6+].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }else if(maxint === "7"){
            const firstCall = new Howl({
              src: 'https://saigaikinkyuu.github.io/monitor-info/audio/announce[Int7].mp3',
              autoplay: true,
              volume: 3,
              loop: false,
              onend: function() {
              announceQuake(coment2)
            }
            });
            firstCall.play();
            }
            }
            warning.play();
            document.getElementById("container").style.display = "none"
            document.getElementById("upDate").style.display = "none"
            document.getElementById("newQuake").style.display = "block"
            setTimeout(closeQuake, 300000); // 1秒後に再度実行
            function closeQuake() {
            quake_info_condition = false;
            document.getElementById("container").style.display = "block"
            document.getElementById("upDate").style.display = "block"
            document.getElementById("newQuake").style.display = "none"
            }
            setTimeout(newquake, 1000); // 1秒後に再度実行
          })
          .catch(error => console.error("Error fetching data:", error));
        }
        }else{
          setTimeout(newquake, 1000); // 1秒後に再度実行
        }
      })
      .catch(error => console.error("Error fetching data:", error));
    }
    newquake()
  </script>
  <script>
    function newInfo() {
      tsunamiInfo()
      function tsunamiInfo(){
    fetch("https://www.jma.go.jp/bosai/tsunami/data/list.json")
      .then(response => response.json())
      .then(data => {
        var json_url  = "https://www.jma.go.jp/bosai/tsunami/data/" + data[0].json;
        const title  = data[0].ttl;
        const ctt  = new Date(data[0].rdt);
        var currentime = new Date()
        var currentminute = currentime.getMinutes()
        currentime.setMinutes(currentminute-3)
        if(ctt>currentime){
        fetch(json_url)
          .then(response => response.json())
          .then(data => {
            var coment = data.Head.Headline.Text
            var items = data.Body.Tsunami.Forecast.Item
            var office = data.Control.EditorialOffice
            var area = ""
            for(var n = 0;n<items.length;n++){
              area += items[n].Area.Name + "、" + items[n].Category.Kind.Name + "、"
            }
            var announceText = ctt.getFullYear() + "年" + (ctt.getMonth()+1) + "月" + ctt.getDate() + "日" + ctt.getHours() + "時" + ctt.getMinutes() + "分に" + office + "が発表した内容です。" + coment + "発表地域です。" + area
            announce(announceText)
            quakeInfo()
          })
        }
      })      
      }
      function quakeInfo(){
      fetch("https://www.jma.go.jp/bosai/quake/data/list.json")
      .then(response => response.json())
      .then(data => {
        var json_url  = "https://www.jma.go.jp/bosai/quake/data/" + data[0].json;
        const title  = data[0].ttl;
        const ctt  = new Date(data[0].rdt);
        var currentime = new Date()
        var currentminute = currentime.getMinutes()
        currentime.setMinutes(currentminute-3)
        if(ctt>currentime){
        fetch(json_url)
          .then(response => response.json())
          .then(data => {
              var area = "";
              var office = data.Control.EditorialOffice
              var coment = data.Head.Headline.Text
              var comentTsunami = data.Body.Comments.ForecastComment.Text
              var hypocenter = data.Body.Earthquake.Hypocenter.Area.Name
              var mag = data.Body.Earthquake.Magnitude
              var items = data.Body.Intensity.Observation.Pref
              var maxInt = data.Body.Intensity.Observation.MaxInt
              var time = data.Body.Earthquake.OriginTime
              for(var n = 0;n<items.length;n++){
                var areas = items[n].Area
                for(var m = 0;m<areas.length;m++){
                  area += areas[m].Name + "、震度、" + areas[m].MaxInt + "、"
                }
              }
              var announceText = ctt.getFullYear() + "年" + (ctt.getMonth()+1) + "月" + ctt.getDate() + "日" + ctt.getHours() + "時" + ctt.getMinutes() + "分に" + office + "が発表した内容です。" + coment + "また、" + comentTsunami + "この地震の、詳細情報です。地震観測時刻、" + ctt.getHours() + "時" + ctt.getMinutes() + "分、震源地、" + hypocenter + "、最大震度、" + maxInt + "、マグニチュード、" + mag + "、震度観測地、" + area;
            announce(announceText)
          })
          }
      })
    setTimeout(quakeInfo, 10000); // 1秒後に再度実行
    }
      function announce(announceText){
    // ブラウザにWeb Speech API Speech Synthesis機能があるか判定        
    if ('speechSynthesis' in window) {
      console.log(announceText)

    // 発言を設定 (必須)
    const uttr = new SpeechSynthesisUtterance(announceText)
    // 音声合成用のオブジェクトを生成
    const synthesis = window.speechSynthesis;
    // 利用可能な音声の一覧を取得
    const voices = synthesis.getVoices();

    // 例として、最初の音声を使用していますが、実際には好みの音声を選択できます
    const selectedVoice = voices[24];
    uttr.voice = selectedVoice;

    // 言語を設定
    uttr.lang = "ja-JP"

    // 速度を設定
    uttr.rate = 1.5

    // 高さを設定
    uttr.pitch = 1

    // 音量を設定
    uttr.volume = 1

    // 発言を再生 (必須)
    window.speechSynthesis.speak(uttr)
    }
      }
            }
    newInfo();
  </script>
  <script src="./js/slide-content.js"></script>
  <script src="./js/text-scroll.js"></script>
</Body>
</html>
