<!DOCTYPE html>
<head>
  <title>Infomation-monitor</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <style>
    #show-cont1{
      display: block;
    }
    #sideshow-container{
      display: none;
    }
    .slideshow-container {
      max-width: 400px;
      position: relative;
      margin: auto;
      overflow: hidden;
    }
    .marquee {
      display: flex;
      white-space: nowrap;
      overflow: hidden;
      gap: 1rem;
      font-size: 3rem;
    }
    .slideshow-container {
      max-width: 400px;
      position: relative;
      margin: auto;
      overflow: hidden;
    }

    .slide {
      display: none;
      width: 100%;
      height: 100%;
      transition: opacity 1s ease-in-out;
    }

    .slide.active {
      display: block;
      opacity: 1;
    }
  </style>
</head>
<Body>
  <h2 id="show-cont1">Welcome!!  infomation-monitor</h2>
  <div style="position: absolute; margin-left: 86%;">
    <h3 id="now_time" style="font-size: 30px;">《現在時刻》</h3>
  </div>
  <div id="slideshow-container" style="height: 650px;">
    <div class="slide active" id="content1">
      <span class="material-symbols-outlined" style="font-size: 10rem;">
        Info
      </span>
      <h3 style="font-size: 3rem;">「SOS」の際は、「1」キーを押してください。</h3>
      <h3 style="font-size: 3rem;">地震情報の優先表示を行う際は、「E」キーを押してください。</h3>
    </div>
    <div class="slide" id="content2">
      <span class="material-symbols-outlined" style="font-size: 9rem;">
        Earthquake
      </span>
      <h3 style="font-size: 2rem;">最新の地震情報</h3>
      <h3 style="font-size: 2rem;">《地域等の情報が入ります》</h3>
    </div>
    <div class="slide" id="content3">
    </div>
  </div>
  <div class="marquee" style="background-color: #6497f4; color: white;">
    <div class="marquee-inner">地震が発生したら、音声と文字にてお知らせいたします。「ここに、天気・過去の地震情報等を表記いたします【テスト】　札幌　☀　　青森　☁　　仙台　☁　　新潟　☀　　金沢　☁　　東京　☂　　　　《省略》　　　那覇　☂」</div>
    <div class="marquee-inner" aria-hidden="true">地震が発生したら、音声と文字にてお知らせいたします。「ここに、天気・過去の地震情報等を表記いたします【テスト】　札幌　☀　　青森　☁　　仙台　☁　　新潟　☀　　金沢　☁　　東京　☂　　　　《省略》　　　那覇　☂」</div>
  </div>
  <script>
    function update() {
      var element = document.getElementById("now_time");
      element.textContent = new Date().toLocaleTimeString();; // 現在時刻を表示

      // 次の更新処理を予約
      setTimeout(update, 100); // 1秒後に再度実行
    }

    // 初回の更新処理を開始
    update();
  </script>
  <script>
    // URLからJSONデータを取得する例// 現在の日時を取得
    const currentDate = new Date();

    // 年月日時分秒を取得
    const year = currentDate.getFullYear();
    const month = String(currentDate.getMonth() + 1).padStart(2, '0');
    const day = String(currentDate.getDate()).padStart(2, '0');
    const hours = String(currentDate.getHours()).padStart(2, '0')-1;
    const minutes = '00';
    const seconds = '00';

    // 指定された形式の数値を作成
    const formattedDate = `${year}${month}${day}${hours}${minutes}${seconds}`;
    var json_url = 'https://www.jma.go.jp/bosai/amedas/data/map/' + formattedDate + '.json'

    console.log(formattedDate);

    const url = json_url;
    fetch(url)
      .then(response => response.json())
      .then(data => {
        // "10"の中の値を取得
        const pressure  = data["44132"].pressure[0];
        const n_pressure  = data["44132"].normalPressure[0];
        const temp  = data["44132"].temp[0];
        const humidity  = data["44132"].humidity[0];
        const snow1h  = data["44132"].snow1h[0];
        const snow6h  = data["44132"].snow6h[0];
        const snow12h  = data["44132"].snow12h[0];
        const snow24h  = data["44132"].snow24h[0];
        const sun10m  = data["44132"].sun10m[0];
        const sun1h  = data["44132"].sun1h[0];
        const precipi10m  = data["44132"].precipitation10m[0];
        const precipi1h  = data["44132"].precipitation1h[0];
        const precipi3h  = data["44132"].precipitation3h[0];
        const precipi24h  = data["44132"].precipitation24h[0];
        const windDirection  = data["44132"].windDirection[0];
        const wind  = data["44132"].wind[0];
        console.log(pressure)
        console.log(n_pressure)
        console.log(temp)
        console.log(humidity)
        console.log(snow1h)
        console.log(snow6h)
        console.log(snow12h)
        console.log(snow24h)
        console.log(sun10m)
        console.log(sun1h)
        console.log(precipi10m)
        console.log(precipi1h)
        console.log(precipi3h)
        console.log(precipi24h)
        console.log(widDirection)
        console.log(wind)
      })
      .catch(error => console.error("Error fetching data:", error));
  </script>
  <script src="./js/slide-content.js"></script>
  <script src="./js/text-scroll.js"></script>
</Body>
</html>
